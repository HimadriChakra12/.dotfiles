#!/usr/bin/env bash
# author: gotbletu (@youtube|github|odysee)
# desc: copy emoji to clipboard (rofi version)

# Force UTF-8 encoding for the script environment
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# {{{ emoji list
mylist() {
    cat <<'EOF'
dead skull |ðŸ’€
crying screaming throwing up |ðŸ˜­
laughing but losing it |ðŸ˜‚
side eye huh|ðŸ˜’
bombastic side eye |ðŸ‘€
sus |ðŸ¤¨
caught in 4k camera shot |ðŸ“¸
nah bro what|ðŸ˜
mid tf huh |ðŸ˜‘
unhinged jolly|ðŸ¤ª
brain fried mind blowing |ðŸ¤¯
mentally gone melting |ðŸ« 
help me oh |ðŸ¥²
holding back tears |ðŸ¥¹
please bro |ðŸ¥º
villain era flirty smirk |ðŸ˜
evil laugh |ðŸ˜ˆ
main character |ðŸ˜Œ
npc mode no words speech |ðŸ˜¶
nah thatâ€™s wild wow |ðŸ˜®
panik whaaat|ðŸ˜±
sleep deprived |ðŸ˜´
tired of it |ðŸ˜®â€ðŸ’¨
gaslighting myself thinking |ðŸ¤”
absolutely not hmm hmph duh |ðŸ™„
embarrassed blushed with astonished and shocked|ðŸ˜³
slay period nail polish |ðŸ’…
bet |ðŸ¤
say less |ðŸ¤™
this you |ðŸ‘‰
finger pookie |ðŸ‘‰ðŸ‘ˆ
up only |ðŸ‘†
down bad |ðŸ‘‡
W |ðŸ‘
L |ðŸ‘Ž
on god |ðŸ™
manifesting |ðŸ™Œ
respectfully |âœ‹
love fr |â¤ï¸
bestie |ðŸ’–
soft launch |ðŸ’•
toxic but cute |ðŸ’”
situationship |ðŸ–¤
healing era |ðŸ¤
lowkey in love |ðŸ©·
obsessed |ðŸ’˜
clown moment |ðŸ¤¡
red flag |ðŸš©
green flag |ðŸŸ©
beige flag |ðŸŸ¨
tea |â˜•
spill the tea |ðŸ«–
facts |ðŸ“ 
cap |ðŸ§¢
no cap |ðŸš«ðŸ§¢
fire |ðŸ”¥
dumpster fire |ðŸ—‘ï¸ðŸ”¥
money moves |ðŸ’¸
golden retriever energy |ðŸ¶
black cat energy |ðŸˆâ€â¬›
feral |ðŸ¦
just a lil guy |ðŸ£
emotional support animal |ðŸ±
unserious frog |ðŸ¸
brain rot |ðŸ§ 
chronically online |ðŸŒ
touch grass |ðŸŒ±
algorithm got me |ðŸ“±
irl jump scare |ðŸšª
pizza time |ðŸ•
burger moment |ðŸ”
taco tuesday |ðŸŒ®
sushi vibes |ðŸ£
beer oclock |ðŸº
light bulb moment |ðŸ’¡
locked in |ðŸ”’
work mode |ðŸ’»
receipt |ðŸ§¾
folder moment |ðŸ“‚
check |âœ…
cross |âŒ
sparkles |âœ¨
star |â­
rose |ðŸŒ¹
speak |ðŸ—£ðŸ“£
cool |ðŸ˜Ž
party time |ðŸ¥³
angel |ðŸ˜‡
heart eyes |ðŸ˜
star eyes |ðŸ¤©
blowing kiss |ðŸ˜˜
yummy |ðŸ˜‹
shhhh |ðŸ¤«
flex |ðŸ’ª
waving |ðŸ‘‹
EOF
}
# }}}

# 1. Show FULL lines (name | emoji) in rofi
selected_line="$(mylist | rofi -dmenu -i -p "Search Emoji" \
    -theme-str 'window {width: 40%;} listview {lines: 15;}')"

# Exit if nothing selected
[[ -z "$selected_line" ]] && exit

# 2. Extract emoji (everything after '|'), trim spaces
emoji="$(printf "%s" "$selected_line" | cut -d'|' -f2 | tr -d ' ')"

# Optional: extract name too (for notify-send)
selected_name="$(printf "%s" "$selected_line" | cut -d'|' -f1 | sed 's/[[:space:]]*$//')"

# 3. Copy to clipboard
if command -v wl-copy >/dev/null 2>&1; then
    printf "%s" "$emoji" | wl-copy
elif command -v xclip >/dev/null 2>&1; then
    printf "%s" "$emoji" | xclip -selection clipboard
fi

notify-send "Emoji Copied" "The emoji $emoji ($selected_name) has been copied."
